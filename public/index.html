<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Unveil the Buried River</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
    <script src="js/init.js"></script>
    <link rel="manifest" href="./manifest.json">
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
    </noscript>

	</head>
	<body class="landing">

		<!-- Header -->
			<header id="header">

				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="function.html">Function</a></li>
						<li><a href="about_us.html">About us</a></li>
						<li><a href="touch.html">Contact</a></li>
					</ul>
				</nav>
			</header>

		<!-- Banner -->
		<div id="fb-root"></div>
			<section id="banner">
				<div class="plane1">
					<h2 style="color:#A37B51;">發 現 德 慶 溪</h2>
					<p style="color:#A37B51;">
						<br>
						德慶溪，一條你可能從未聽說過、<br>
						<br>
						彷彿連臺南市地圖也集體失憶的溪流。<br>
						<br>
						曾流過赤嵌社梅花鹿飲水的悠閒、<br>
						<br>
						普羅民遮城汲水士兵的清涼<br>
						<br>
						和國姓爺攻臺的意氣風發……
					</p>
					<ul class="actions">
	 					<li><a class="button" id="Sign_Up">開 始 探 索</a></li>
	 				</ul>
				</div>

				<img class="plane2" src="images/LOGO2.png" alt="LOGO" style="width:45%; display:none;">
				<div class="plane2" style="width:90%; height:40%; margin:0 auto; background-color:#A37B51; border-radius: 20px; display:none;">
					<div id="back" class="icon fa-times" align="right">&nbsp&nbsp&nbsp</div>
					<br>
					<h3 style="color:white;">登 入 後 繼 續</h3>
					<br>
					<div class="4u$ 12u$(medium)">
						<ul class="icons">
							<li>
								<a class="icon rounded fa-facebook" id="FB_login"><span class="label">Facebook</span></a>
							</li>
							<li>
								<a class="icon rounded fa-twitter" id="Twitter_login"><span class="label">Twitter</span></a>
							</li>
							<li>
								<a class="icon rounded fa-google-plus" id="Google_login"><span class="label">Google+</span></a>
							</li>
							<li>
								<a class="icon rounded fa-linkedin" id="LinkedIn_login"><span class="label">LinkedIn</span></a>
							</li>
						</ul>
					</div>
				</div>

				<div class="plane3" style="width: 80%; margin: 0 auto; display:none;">
					<h2 style="color:#A37B51;">發 現 德 慶 溪</h2>
					<br>
					<ul class="actions vertical">
						<li><a href="map.html" class="button icon fa-child">自由行</a></li>
						<br>
						<li><a href="tour_guide.html" class="button icon fa-search">尋找導覽員</a></li>
						<br>
						<li><a href="#" class="button icon fa-expand">掃QR碼</a></li>
						<br>
						<li><a href="historical_record.html" class="button icon fa-book">歷史紀錄</a></li>
					</ul>
				</div>
			</section>
      <!--script src="js/app.js"></script-->

		<script>
			// Chenge planes
			$("#Sign_Up").click(function(){
				$(".plane1").toggle();
				$(".plane2").toggle();
			});
			$("#back").click(function(){
				$(".plane1").toggle();
				$(".plane2").toggle();
			});

			// Facebook SDK setup
			var user_id, user_name, accessToken;
			window.fbAsyncInit = function() {
	      FB.init({
	        appId            : '193212224643038',
	        autoLogAppEvents : true,
	        xfbml            : true,
	        version          : 'v3.0'
	      });

        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // Login and connect to app
                user_id = response.authResponse.userID;
                accessToken = response.authResponse.accessToken;
								$(".plane1").hide();
	 						  $(".plane2").hide();
	 						  $(".plane3").show();

            } else if (response.status === 'not_authorized') {
                // Login but not connect

            } else {
                // Not login

            }
        });
			}

			// Facebook login
			$("#FB_login").click(function(){
				FB.login(function(response){
					if (response.authResponse) {
			     console.log('Welcome!  Fetching your information.... ');
			     FB.api('/me', function(response) {
			       console.log('Good to see you, ' + response.name + '.');
						 $(".plane1").hide();
						 $(".plane2").hide();
						 $(".plane3").show();
						 user_id = response.id;
						 user_name = response.name;
						 user_mail = response.email;
						 // Send user id to the server
						 $.ajax({
				       method: "post",
				       url: "/user_login",
				       data: {
				         user_id : response.id
								 // get whatever you need
				       },
				       success: function() {
				       }
				     })
			     });
			    } else {
			     console.log('User cancelled login or did not fully authorize.');
			    }
				},{
					 scope: 'email,user_about_me,user_likes,user_status'
				 });
			});

			// Load the SDK asynchronously
	    (function(d, s, id) {
	      var js, fjs = d.getElementsByTagName(s)[0];
	      if (d.getElementById(id)) return;
	      js = d.createElement(s); js.id = id;
	      js.src = 'https://connect.facebook.net/zh_TW/sdk.js';
	      fjs.parentNode.insertBefore(js, fjs);
	    }(document, 'script', 'facebook-jssdk'));

		</script>
	</body>
</html>
